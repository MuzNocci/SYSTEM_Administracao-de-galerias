{% extends "_base/base.html" %}
{% load static %}

{% block content %}
<div class="button-container">
    <h1>Atualizar Cliente</h1>
</div>
<form action="{% url 'client_update' client.id %}" method="POST" enctype="multipart/form-data">
    {% csrf_token %}
    <div class="grid">
        <div class="form-section">
            <h3>Dados Pessoais</h3>
            <div class="form-col">
                <div class="form-row" style="margin-top: 10px;">
                    <div class="form-group">
                        <label>Foto:</label>
                        <div class="data form-img">
                            <div class="upload-container">
                                {% if client.photo %}
                                <img id="image-preview" class="preview" src="{{ client.photo.url }}" alt="{{ client.name }}">
                                {% else %}
                                    {% if client.gender == 'F' %}
                                    <img id="image-preview" class="preview" src="{% static 'app/images/clients/customer_woman.png' %}" alt="Pré-visualização da imagem">
                                    {% else %}
                                    <img id="image-preview" class="preview" src="{% static 'app/images/clients/customer_man.png' %}" alt="Pré-visualização da imagem">
                                    {% endif %}
                                {% endif %}
                                <label class="upload-label" for="photo">Foto</label>
                                {{ form.photo }}
                            </div>
                        </div>
                    </div>
                </div>
                <div class="data">
                    <div class="form-row" style="margin-top: 10px;">
                        <div class="form-group">
                            <label for="nome">Nome:</label>
                            {{ form.name }}
                            {% if form.name.errors %}
                                <ul class="errorlist">
                                    {% for error in form.name.errors %}
                                        <li>{{ error }}</li>
                                    {% endfor %}
                                </ul>
                            {% endif %}
                        </div>
                        <div class="form-group">
                            <label for="instagram">Instagram:</label>
                            {{ form.instagram }}
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="email">Email:</label>
                            {{ form.email }}
                            {% if form.email.errors %}
                                <ul class="errorlist">
                                    {% for error in form.email.errors %}
                                        <li>{{ error }}</li>
                                    {% endfor %}
                                </ul>
                            {% endif %}
                        </div>
                        <div class="form-group" style="max-width: 200px;">
                            <label for="phone">Telefone:</label>
                            {{ form.phone }}
                            {% if form.phone.errors %}
                                <ul class="errorlist">
                                    {% for error in form.phone.errors %}
                                        <li>{{ error }}</li>
                                    {% endfor %}
                                </ul>
                            {% endif %}
                        </div>
                        <div class="form-group" style="max-width: 110px;">
                            <label for="whatsapp">É WhatsApp?</label>
                            <div>
                                {{ form.whatsapp }}
                            </div>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="gender">Gênero:</label>
                            {{ form.gender }}
                        </div>
                        <div class="form-group">
                            <label for="birth">Data Nascimento:</label>
                            {{ form.birth }}
                            {% if form.birth.errors %}
                                <ul class="errorlist">
                                    {% for error in form.birth.errors %}
                                        <li>{{ error }}</li>
                                    {% endfor %}
                                </ul>
                            {% endif %}
                        </div>
                        <div class="form-group">
                            <label for="cpf">CPF:</label>
                            {{ form.cpf }}
                            {% if form.cpf.errors %}
                                <ul class="errorlist">
                                    {% for error in form.cpf.errors %}
                                        <li>{{ error }}</li>
                                    {% endfor %}
                                </ul>
                            {% endif %}
                        </div>
                        <div class="form-group">
                            <label for="RG">RG:</label>
                            {{ form.rg }}
                        </div>
                    </div>
                </div>
            </div>
            <h3>Endereço</h3>
            <div class="form-row" style="margin-top: 10px;">
                <div class="form-group" style="max-width: 100px;">
                    <label for="zip_code">CEP</label>
                    {{ form.zip_code }}
                </div>
                <div class="form-group">
                    <label for="address">Endereço</label>
                    {{ form.address }}
                </div>
                <div class="form-group" style="max-width: 120px;">
                    <label for="numero">Número</label>
                    {{ form.address_number }}
                </div>
                <div class="form-group">
                    <label for="complement">Complemento</label>
                    {{ form.complement }}
                </div>
            </div>
            <div class="form-row">
                <div class="form-group">
                    <label for="neighborhood">Bairro</label>
                    {{ form.neighborhood }}
                </div>
                <div class="form-group">
                    <label for="city">Cidade</label>
                    {{ form.city }}
                </div>
                <div class="form-group">
                    <label for="state">Selecione o Estado:</label>
                    {{ form.state }}
                </div>
            </div>
            <h3>Outros Dados</h3>
            <div class="form-row" style="margin-top: 10px;">
                <div class="form-group">
                    <label for="observation">Observação:</label>
                    {{ form.observation }}
                </div>
                <div class="form-group" style="max-width: 150px;">
                    <label for="active">Ativar cliente?</label>
                    <div>
                        {{ form.active }}
                    </div>
                </div>
            </div>
        </div> <!-- end table -->           
    </div> <!-- end grid -->
    <div class="button-container">
        <div></div>
        <button class="button">
            <i class="fa-solid fa-sync"></i> Atualizar
        </button>
    </div>
</form>
{% endblock content %}

{% block scripts %}
<script src="{% static 'app/scripts/upload_image.js' %}"></script>
<script src="{% static 'app/scripts/masks.js' %}"></script>
{% endblock scripts %}